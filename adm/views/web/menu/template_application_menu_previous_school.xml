<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="adm.template_application_menu_previous_school">
        <t t-call="website.layout">
            <t t-set="title">Application</t>
            <link rel="stylesheet" href="/adm/static/css/form_application.css"/>
            <div class="oe_struture"/>
            <div class="oe_struture">

                <t t-call="adm.template_application_menu"/>
                <div class="container-fluid d-flex p-4">
                    <main class="col">

                        <section class="card mb-2">

                            <section class="card-header">
                                <h1>Academic Information</h1>
                            </section>

                            <section class="card-body&gt;">
                                <div class="container">
                                    <t t-if="application.status_id.type_id !='return' and application.status_id.type_id != 'started'">
                                        <div class="alert alert-warning mt-3" role="alert">
                                            The request has already been sent.
                                        </div>
                                    </t>
                                    <t t-else="">
                                        <article class="row card card-body d-none pt-0 mt-2" id="form-template">
                                            <input class="form-control" type="hidden" name="previous_school_id" value="-1"/>

                                            <div class="row">
                                                <section class="col-12 d-flex justify-content-end pt-2 pb-1 m-0">
                                                    <button type="button" class="btn btn-danger remove-school">&#10006;</button>
                                                </section>
                                            </div>

                                            <div class="row">
                                                <section class="col-12 col-md">
                                                    <label>School Name:</label>
                                                    <span class="text-danger"> *</span>
                                                    <div>
                                                        <input required="required" class="form-control" type="text" name="previous_school_name"/>
                                                    </div>
                                                </section>

                                                <section class="col-12 col-md">
                                                    <label>School Address:</label>
                                                    <input class="form-control" type="text" name="previous_school_street"/>
                                                </section>
                                            </div>



                                            <div class="row">
<!--                                                <section class="col-6">-->
<!--                                                    <label>Country</label>-->
<!--                                                    <select class="country form-control" name="previous_school_country">-->
<!--                                                        <option selected="selected" disabled="disabled">Select a country-->
<!--                                                        </option>-->
<!--                                                        <t t-foreach="countries" t-as="country">-->
<!--                                                            <option t-att-value="country.id" t-field="country.name"/>-->
<!--                                                        </t>-->
<!--                                                    </select>-->
<!--                                                </section>-->
                                                 <section class="col-6">
                                                    <label>Country</label> <span class="text-danger"> *</span>
                                                    <select required="required" class="country form-control" name="previous_school_country">
                                                        <option selected="selected" disabled="disabled">Select a country
                                                        </option>
                                                        <t t-foreach="countries" t-as="country">
                                                            <option t-att-value="country.id" t-field="country.name"/>
                                                        </t>
                                                    </select>
                                                </section>
                                                <section class="col-6">
                                                    <label>State</label> <span class="text-danger"> *</span>
                                                    <select required="required" class="state form-control"  name="previous_school_state">
                                                        <option selected="selected" disabled="disabled">Select a
                                                            state
                                                        </option>
                                                        <t t-foreach="states" t-as="state">
                                                            <option t-att-value="state.id" t-field="state.name" t-att-data-country="state.country_id.id"/>
                                                        </t>
                                                    </select>
                                                </section>
                                                <section class="col-6">
                                                    <label>City</label>
                                                    <input class="form-control" type="text" name="previous_school_city"/>
                                                </section>

                                                <!--<section class="col-6">
                                                    <label>Zip</label>
                                                    <input class="form-control" type="text" name="previous_school_zip"/>
                                                </section>-->
                                            </div>
                                            <div class="row">
                                                <!--
                                                <section class="col-12 col-md">
                                                    <label>Phone</label>
                                                    <input class="form-control" type="text" name="previous_school_phone"/>
                                                </section>-->
                                                <section class="col-12 col-md">
                                                    <label>
                                                        To Date
                                                        <span class="text-danger"> *</span>
                                                    </label>
                                                    <input required="required" class="form-control" type="date" name="previous_school_todate"/>
                                                </section>
                                                <section class="col-12 col-md">
                                                    <label>
                                                        From Date
                                                        <span class="text-danger"> *</span>
                                                    </label>
                                                    <input required="required" class="form-control" type="date" name="previous_school_fromdate"/>
                                                </section>

                                            </div>
                                            <div class="row">
                                                <section class="col-12 col-md">
                                                    <label>
                                                        Grade Current or Completed
                                                        <span class="text-danger"> *</span>
                                                    </label>
                                                    <input required="required" class="form-control" type="text" name="previous_school_gradecompleted"/>
                                                </section>

                                            </div>
                                            <div class="row">
                                                <section class="col-12 col-md">
                                                    <label>
                                                        Applicant’s extracurricular interests:
                                                    </label>
                                                    <textarea class="form-control"  name="previous_school_extracurricular_interests"/>
                                                </section>
                                            </div>

                                        </article>


                                        <form t-att-action="'/admission/applications/{}/write'.format(application_id)" method="post" enctype="multipart/form-data">

                                            <input class="form-control" type="hidden" name="has_previous_schools"/>

                                            <section class="container-fluid">
                                                <div id="school_forms">
                                                    <t t-foreach="application.previous_school_ids" t-as="previous_school">
                                                        <article class="row card card-body pt-0 mt-2" t-att-id="'previous_school_{}'.format(previous_school_index+1)">
                                                            <input class="form-control" type="hidden" name="previous_school_id" t-att-value="previous_school.id"/>

                                                            <div class="row">
                                                                <section class="col-12 d-flex justify-content-end pt-2 pb-1 m-0">
                                                                    <button type="button" class="btn btn-danger remove-school" t-att-data-id="previous_school_index+1">&#10006;</button>
                                                                </section>
                                                            </div>
                                                            <div class="row">
                                                                <section class="col-12 col-md">
                                                                    <label>School Name:</label>
                                                                    <span class="text-danger"> *</span>
                                                                    <div>
                                                                        <input class="form-control" type="text" name="previous_school_name" t-att-value="previous_school.name"/>
                                                                    </div>
                                                                </section>

                                                                <section class="col-12 col-md">
                                                                    <label>School Address:</label>
                                                                    <input class="form-control" type="text" name="previous_school_street" t-att-value="previous_school.street"/>
                                                                </section>
                                                            </div>
                                                            <div class="row">
                                                                <section class="col-6">
                                                                    <label>Country</label>

                                                                    <select class="country form-control" name="previous_school_country">
                                                                        <option selected="selected" disabled="disabled">Select a country
                                                                        </option>
                                                                        <t t-foreach="countries" t-as="country">
                                                                            <option t-if="previous_school.country_id == country" selected="selected" t-att-value="country.id" t-field="country.name"/>
                                                                            <option t-else="" t-att-value="country.id" t-field="country.name"/>
                                                                        </t>
                                                                    </select>
                                                                </section>
                                                                <section class="col-6">

                                                                    <label>State</label>
                                                                    <select class="state form-control" name="previous_school_state">
                                                                        <option selected="selected" disabled="disabled">Select a
                                                                            state
                                                                        </option>

                                                                        <t t-foreach="states" t-as="state">

                                                                            <option t-att-value="state.id" t-field="state.name" t-att-selected="previous_school.state_id.id == state.id" t-att-data-country="state.country_id.id"/>

<!--                                                                            <option t-if="previous_school.state_id.id == state.id" selected="selected" t-att-value="state.id" t-field="state.name" t-att-data-country="state.country_id.id"/>-->
<!--                                                                            <option t-else="" t-att-value="state.id" t-field="state.name" t-att-data-country="state.country_id.id"/>-->
                                                                        </t>
                                                                    </select>
                                                                </section>


                                                                <section class="col-6">
                                                                    <label>City</label>
                                                                    <input class="form-control" type="text" name="previous_school_city" t-att-value="previous_school.city"/>
                                                                </section>


                                                            </div>
                                                            <div class="row">

                                                                <section class="col-12 col-md">
                                                                    <label>
                                                                        To Date
                                                                        <span class="text-danger"> *</span>
                                                                    </label>
                                                                    <input class="form-control" type="date" name="previous_school_todate" t-att-value="previous_school.to_date"/>
                                                                </section>

                                                                <section class="col-12 col-md">
                                                                    <label>
                                                                        From Date
                                                                        <span class="text-danger"> *</span>
                                                                    </label>
                                                                    <input class="form-control" type="date" name="previous_school_fromdate" t-att-value="previous_school.from_date"/>
                                                                </section>

                                                            </div>
                                                            <div class="row">
                                                                <section class="col-12 col-md">
                                                                    <label>
                                                                        Grade Current or Completed
                                                                        <span class="text-danger"> *</span>
                                                                    </label>
                                                                    <input class="form-control" type="text" name="previous_school_gradecompleted" t-att-value="previous_school.grade_completed"/>
                                                                </section>
                                                            </div>
                                                            <div class="row">
                                                                <section class="col-12 col-md">
                                                                    <label>
                                                                        Applicant’s extracurricular interests:
                                                                    </label>
                                                                    <input class="form-control" type="text" name="previous_school_extracurricular_interests" t-att-value="previous_school.extracurricular_interests"/>
                                                                </section>
                                                            </div>

                                                        </article>
                                                    </t>

                                                    <button type="button" class="add-school btn btn-secondary d-block mt-2 ml-auto">&#10010; Add school</button>
                                                </div>
                                                <div class="row justify-content-center p-4">
                                                    <button class="btn btn-lg btn-warning">Submit changes</button>
                                                </div>
                                            </section>
                                        </form>
                                    </t>
                                </div>
                            </section>
                        </section>
                    </main>
                </div>
            </div>
        </t>
        <script defer="defer" type="text/javascript" src="/adm/static/js/previous_school.js"/>
    </template>
</odoo>